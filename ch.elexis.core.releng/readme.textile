h1. elexis-3-core/ch.elexis.core.releng

This project contains utilities needed for the release engineering for elexis-3.

h2. Usage

* Very minimal at the time being

h2. Requirements

* Java 7
* Maven 3
* Rake
* Eclipse Juno (3.8.2)

h2. headless build (aka command line)

* @export JAVA_HOME=/opt/java-oracle/jdk1.7.0_25@ # Set your Java home
* @cd ch.elexis.core.releng/elexis.3rdparty.libraries && mvn clean p2:site@ # Builds a p2-site needed to use Eclipse target definition ch.elexis.core.releng/elexis-3.target
* @cd ../../ch.elexis.core.releng && mvn clean install@ # compiles and create packages

This creates directories like @ch.elexis.core.releng/product/target/products/ch.elexis.core.application.product/linux/gtk/x86_64@ where you find the executable @Elexis 3.0@ application.

The directory @ch.elexis.core.releng/product/target/repository/@ contains a simple P2 update-site for Elexis.

To deploy this site have a look at the excellent "Eclipse Tycho - Tutorial for building Eclipse Plugins and RCP applications":http://www.vogella.com/articles/EclipseTycho/article.html#deploy. Or https://github.com/intalio/tycho-p2-scripts/wiki

h2. problems

* How to keep MANIFEST.MF and pom.xml in sync
	See also https://bugs.eclipse.org/bugs/show_bug.cgi?id=387802
	mvn org.eclipse.tycho:tycho-versions-plugin:update-pom -Dtycho.mode=maven
	mvn clean install

h2. Eclipse IDE

* build the project foreign-libraries
* open  foreign-libraries/elexis-3.target and click on "Set as Target Platform"
* build your plug-ins

h2. TODO

* Investigate why the created app does not start
* Fix problem with missing icons
* Add deploy to scp/sftp
